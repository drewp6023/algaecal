<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=”description” content=”AlgaeCal phase 2 coding assesment.“>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./css/style.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="//fast.wistia.com/embed/medias/cecdwaq3dz.jsonp" async></script>
    <script src="//fast.wistia.com/assets/external/E-v1.js" async></script>

    <title>AlgaeCal Assessment</title>
</head>

<body>
    <section id="header-section">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-md-9">
                    <img id="logo" class="img-fluid" alt="Responsive Logo" src="/algaecal/images/logo.png">
                </div>
                <div class="col-xs-12 col-md-3">
                    <div><span class="font-weight-bold">Tap to Talk</span> <a href="tel:+1-800-820-0184"><span id="default-phone" class="algae-cal-blue font-weight-bold"></span></a></div>
                    <div id="speak-to-specialists"><img class="img-fluid d-inline-block" src="/algaecal/images/green_phone_elipse.png"> <span id="speak-span">Speak to our Bone Health Specialists!</span></div>
                </div>                            
            </div>    
        </div>
    </section>

    <section id="intro-section">
        <div class="container text-center">
            <img id="intro-copy" alt="Intro Copy" class="img-fluid" src="/algaecal/images/intro_copy.png" />
        </div>
    </section>
    <section id="video-section">
        <div class="container">
            <div class="col-xs-12">
                <div id="vs-copy">
                    Build <span class="font-weight-bold">brand new bone</span> <span class="text-uppercase">within 6 months</span> with this <span class="font-weight-bold">rare algae</span> calcium...even if you're 85!
                </div>
                <div id="youtube-video">
                    <div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;">
                        <div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
                            <div class="wistia_embed wistia_async_cecdwaq3dz videoFoam=true autoPlay=false" style="height:100%;width:100%">&nbsp;</div>
                        </div>
                    </div>      
                    <img id="tap-to-play" alt="Tap to Play" class="img-fluid" src="/algaecal/images/tap_to_play.png">
                </div>                    
            </div>        
        </div>
    </section>
    <section id="products-section" name="products-section">
        <div class="container">

            <div id="products-wrapper" class="row">
                <div class="col-xs-12 col-md-4 product-container">
                    <img class="img-fluid" src="/algaecal/images/3_month_full_no_button.png" />
                    <a href="https://www.algaecal.com/product/bone-builder-packs/"><img src="/algaecal/images/add-to-cart-button.png"></a>
                </div>
                <div class="col-xs-12 col-md-4 product-container">
                    <img class="img-fluid" src="/algaecal/images/6_month_full_no_button.png" />
                    <a href="https://www.algaecal.com/product/bone-builder-packs/"><img src="/algaecal/images/add-to-cart-button.png"></a>
                </div>
                <div class="col-xs-12 col-md-4 product-container">
                    <img class="img-fluid" src="/algaecal/images/12_month_full_no_button.png" />
                    <a href="https://www.algaecal.com/product/bone-builder-packs/"><img src="/algaecal/images/add-to-cart-button.png"></a>
                </div>          

            </div>

            <h2 class="font-weight-bold text-center nf-title">AlgaeCal Plus</h2>
            <table id="alagaecal-plus-nf" class="nutrition-fact">
                    
            </table>

            <h2 class="font-weight-bold text-center nf-title">Strontonium Boost</h2>
            <table id="strontium-boost-nf" class="nutrition-fact">
                
            </table>
        </div>        
    </section>

    <section id="guarantee-section">
        <div class="container">
            <div class="col-xs-12">
                <!-- <img class="img-fluid" src="/algaecal/images/guarantee_section.png" /> -->
                <div class="white-bg">
                    <div class="text-center"><img class="img-fluid" id="gold-medal-lg" src="" /></div>
                    <div>
                        <h2 id="sev-yr-title" class="text-center"></h2>
                        <span id="sev-yr-copy"></span>
                    </div>
                    <div class="text-center">
                        <img class="img-fluid" src="/algaecal/images/dean_neuls.png" />
                    </div>
                </div>
            </div>         
        </div>
    </section>

    <section id="book-section">
        <div class="container">
            <div class="col-xs-12"><img class="img-fluid" src="/algaecal/images/books_section.png" /></div>
        </div>
    </section>

    <section id="references-section">
        <div class="container">
            <div class="col-xs-12"><img class="img-fluid" src="/algaecal/images/references_section.png" /></div>         
            <div class="text-center"><u class="algae-cal-blue">View Full Reference List...</u></div>
        </div>        
    </section>

<!--     <section id="references-section">
        <div class="container">
            <div id="sr-title" class="algae-cal-blue text-center">Scientific References</div>
            <div id="references-wrapper">
                <ol>
                    <li>Marques A, Ferreira RJ, Santos E., et al.  The accuracy of osteoporotic fracture risk prediction tools: a systematic review and meta-analysis.  Ann Rheum Dis. 2015 Nov;74(11):1958-67.<br>doi:<br>10:1136/annrheumdis-2015-207907. Epub</li>
                    <li>Marques A, Ferreira RJ, Santos E., et al.  The accuracy of osteoporotic fracture risk prediction tools: a systematic review and meta-analysis.  Ann Rheum Dis. 2015 Nov;74(11):1958-67.<br>doi:<br>10:1136/annrheumdis-2015-207907. Epub</li>
                    <li>Marques A, Ferreira RJ, Santos E., et al.  The accuracy of osteoporotic fracture risk prediction tools: a systematic review and meta-analysis.  Ann Rheum Dis. 2015 Nov;74(11):1958-67.<br>doi:<br>10:1136/annrheumdis-2015-207907. Epub</li>
                    <li>Marques A, Ferreira RJ, Santos E., et al.  The accuracy of osteoporotic fracture risk prediction tools: a systematic review and meta-analysis.  Ann Rheum Dis. 2015 Nov;74(11):1958-67.<br>doi:<br>10:1136/annrheumdis-2015-207907. Epub</li>
                    <li>Marques A, Ferreira RJ, Santos E., et al.  The accuracy of osteoporotic fracture risk prediction tools: a systematic review and meta-analysis.  Ann Rheum Dis. 2015 Nov;74(11):1958-67.<br>doi:<br>10:1136/annrheumdis-2015-207907. Epub</li>
                </ol>
            </div>
            <div id="full-rl" class="text-center">
                <a href="" class="algae-cal-blue">View Full Reference List...</a>
            </div>
        </div>
    </section> -->

    <div class="container text-center">
        <a href="#products-section"><img class="img-fluid" src="/algaecal/images/buy_now_button.png" alt="Buy Now Button"></a>        
    </div>

    <section id="footer-section" class="text-center">
        <img class="img-fluid" src="/algaecal/images/logo.png" alt="Logo">

        <div>
            <ul id="footer-menu">
                <li><a href="#">Shipping & Returns</li></a>
                <li><a href="#">Health Disclaimer</li></a>
                <li><a href="#">Legal and Privacy Policy</li></a>
                <li><a href="#">Contact</li></a>
                <li><a href="#">Order Now</li></a>
            </ul>            
        </div>

        <div id="copyrite">
            Copyright &copy; 2017 AlgaeCal
        </div>
    </section>

    <!-- Modal -->
    <div class="modal fade" id="guarantee-modal" tabindex="-1" role="dialog" aria-labelledby="Guarantee Modal" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>  

    <script type="text/javascript">
        $(document).ready(function() {
            
            var apiUrl = "https://www.algaecal.com/wp-json/acf/v3/options/options";

            // Grab options and set html text based off response
            $.get(apiUrl)
                .then(function(data) {
                    var data = data.acf;
                    var defaultPhone = data.default_phone_number;
                    var now = new Date();
                    var workingHours = isWorkingHour(now);
                    var sevenYrTitle = data['7yr_title'];
                    var sevenYrCopy = data['7yr_short_copy'];
                    var goldMedal = data.seven_year_guarantee_seal.sizes['thumbnail'];

                    console.log('data', data);

                    // Guarantee section 
                    $("#gold-medal-lg").attr("src", goldMedal);
                    $("#sev-yr-title").text(sevenYrTitle);
                    $("#sev-yr-copy").html(sevenYrCopy).append("Also, if you are unsatisfied at any time you can return my product for a full refund, no questions asked! <u class='algae-cal-blue' data-toggle='modal' data-target='#guarantee-modal'>Click Here for Details</u></a>");

                    // Add default phone number
                    $("#default-phone").text(defaultPhone);

                    // Modal support
                    $("#guarantee-modal .modal-title").text(sevenYrTitle);
                    $("#guarantee-modal .modal-body").html(data['7yr_full_copy']).find("img").addClass("img-fluid");

                    // Show speak-to-specialists block if during working hours
                    if (workingHours) $("#speak-to-specialists").show();
                })
                .catch(function(error) {
                    console.error(error);
                });

                function isWorkingHour(now) {
                    return now.getDay() <= 5 && now.getHours() >= 9 && now.getHours() < 17;
                }       

            /////////////////////////////////
            // BEGIN - Wistia Functionality
            /////////////////////////////////

            window._wq = window._wq || [];

            _wq.push({ 
                id: "cecdwaq3dz",
                onReady: function(video) {
                    // console.log("I got a handle to the video!", video);
                    var productsWrapper = $("#products-wrapper");

                    if (video.embedded()) {
                        $("#tap-to-play").on("click", function(e) {
                            console.log('state', video.state());
                            if (video.state() === "playing") {
                                video.pause();
                            } else if (video.state() == "beforeplay" || video.state() == "paused") {
                                video.play();
                                $(this).hide();
                            }
                        });

                        video.bind("timechange", function(t) {
                            if (t > 133) {
                                productsWrapper.show();
                            } else {
                                productsWrapper.hide();
                            }
                        });

                        // User click control
                        video.bind("timechange", 0, 133, function(withinInterval) {
                            if (withinInterval) {
                                productsWrapper.hide();
                            } else {
                                productsWrapper.show();
                            }
                        });                        
                    }
                }
            });   

            /////////////////////////////////
            // END - Wistia Functionality
            /////////////////////////////////                                  
        });
    </script>
</body>

</html>